<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for js\controladores\InicioSesionControlador.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">js/controladores/</a> InicioSesionControlador.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">20.83% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>10/48</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/6</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">9.09% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>1/11</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">20.83% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>10/48</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * @type    controller
 * @name    InicioSesionControlador
 * @desc    Es el controlador QUE inicia sesion en el sistema.
 * @autor   Mauro Xavier Rivera Rasury (fatalfurydeveloper)
 * @email   fatalfurydeveloper@gmail.com
 * @since   01-09-2018
 * @version 1.0
 */
(function(angular) {
    'use strict';
    angular.module('sri').controller('InicioSesionControlador',InicioSesionControlador);
&nbsp;
    InicioSesionControlador.$inject = ['$rootScope', '$scope', '$state', '$translate', '$timeout',
        'I18nFactory', 'SesionFactory', 'InicioSesionServicio'];
&nbsp;
<span class="fstat-no" title="function not covered" >    function InicioSesionControlador($rootScope, $scope, $state, $translate, $timeout,</span>
        i18nFactory, SesionFactory, InicioSesionServicio) {
&nbsp;
        /** ********** DECLARACION DE VARIABLES ************ */
<span class="cstat-no" title="statement not covered" >        var vm = this;</span>
        // Variables para instanciar los campos de los formularios
<span class="cstat-no" title="statement not covered" >        vm.expRegular = /^[0-9\/]{0,10}$/;</span>
<span class="cstat-no" title="statement not covered" >        vm.expRegularFinal = "";</span>
<span class="cstat-no" title="statement not covered" >        vm.alerts = [];</span>
<span class="cstat-no" title="statement not covered" >        vm.desactivarBtnAceptar = true;</span>
<span class="cstat-no" title="statement not covered" >        vm.txtEmail = "";</span>
<span class="cstat-no" title="statement not covered" >        vm.txtClave = "";</span>
<span class="cstat-no" title="statement not covered" >        vm.ruta = 'sis-web';</span>
        // Variables para llamar a funciones
<span class="cstat-no" title="statement not covered" >        vm.login = login;</span>
<span class="cstat-no" title="statement not covered" >        vm.consultar = consultarArea;</span>
<span class="cstat-no" title="statement not covered" >        vm.agregarAlerta = agregarAlerta;</span>
<span class="cstat-no" title="statement not covered" >        vm.init = inicializar;</span>
<span class="cstat-no" title="statement not covered" >        vm.limpiarFiltro = borrarFiltros;</span>
&nbsp;
        /** ********** FUNCIONES ************ */
<span class="cstat-no" title="statement not covered" >        $rootScope.$on('$translateChangeSuccess', inicializar);</span>
&nbsp;
        /**
         * @author Mauro Xavier Rivera Rasury (mjrr210316)
         * @description Funcion para inicializar datos en nuestra aplicación
         * @return void
         */
<span class="fstat-no" title="function not covered" >        function inicializar(){</span>
<span class="cstat-no" title="statement not covered" >            vm.idioma = i18nFactory.idioma();</span>
        }
&nbsp;
        /**
         * @author Mauro Xavier Rivera Rasury (mjrr210316)
         * @description validacion de campos obligatorios para activar boton agregar
         * @returns void
         */
<span class="cstat-no" title="statement not covered" >        vm.validar = <span class="fstat-no" title="function not covered" >function (){</span></span>
<span class="cstat-no" title="statement not covered" >            if (vm.txtEmail !== "" &amp;&amp; vm.txtClave !== "") {</span>
<span class="cstat-no" title="statement not covered" >                vm.desactivarBtnAceptar = false;</span>
            } else {
<span class="cstat-no" title="statement not covered" >                vm.desactivarBtnAceptar = true;</span>
            }
        };
&nbsp;
<span class="fstat-no" title="function not covered" >        function login () {</span>
<span class="cstat-no" title="statement not covered" >            consultarUsuario();</span>
            /*if (vm.txtEmail === 'admin' &amp;&amp; vm.txtClave === 'admin')
            {
                SesionFactory.login(vm.txtEmail, vm.txtClave);
                //$state.go(vm.ruta);
            }*/
        }
&nbsp;
        /**
         * @author Mauro Xavier Rivera Rasury (mjrr210316)
         * @description Funcion para consultar informacion de Usuario
         * @returns void
         */
<span class="fstat-no" title="function not covered" >        function consultarUsuario(){</span>
<span class="cstat-no" title="statement not covered" >             var datos = {</span>
                name: "Mauro Xavier Rivera Rasury",
                nickname:    "1313490433",
                email:  "admin@example.org",
                password:  "1",
                id:     "1"
            };
<span class="cstat-no" title="statement not covered" >            var promesa = InicioSesionServicio.login(datos);</span>
<span class="cstat-no" title="statement not covered" >            promesa.then(<span class="fstat-no" title="function not covered" >function(respuesta){</span></span>
<span class="cstat-no" title="statement not covered" >                vm.usuario = respuesta.data[0];</span>
<span class="cstat-no" title="statement not covered" >                var tipo = "usuario";</span>
<span class="cstat-no" title="statement not covered" >                console.log("Tipo: "+vm.usuario.admin);</span>
<span class="cstat-no" title="statement not covered" >                if(vm.usuario.admin === "t"){</span>
<span class="cstat-no" title="statement not covered" >                    tipo = "admin";</span>
                }
                //console.log(JSON.stringify(respuesta.data));
<span class="cstat-no" title="statement not covered" >                SesionFactory.login(vm.usuario.email, tipo);</span>
            },
<span class="fstat-no" title="function not covered" >            function(){</span>
<span class="cstat-no" title="statement not covered" >                agregarAlerta("danger","Error");</span>
            });
        }
&nbsp;
<span class="fstat-no" title="function not covered" >        function consultarArea(){</span>
<span class="cstat-no" title="statement not covered" >            var datos= {</span>
                    funcion:"consultarAreas"
            };
<span class="cstat-no" title="statement not covered" >            console.log(datos);</span>
            /*var promesa = AreaServicio.consultarAreas(datos);
                promesa.then(function (respuesta) {
                    vm.datosAreas = respuesta.data;
                    vm.dtAdministrar.reloadData();
                },
                function() {
                    agregarAlerta("danger","MSJ.CON.ERROR");
                });*/
        }
&nbsp;
        /**
         * @author Mauro Xavier Rivera Rasury (mjrr210316)
         * @description Funcion para agregar alertas a mostrar
         * @param {string} [tipoMensaje] [Definicion del tipo de alerta]
         * @param {string} [mensaje] [Definicion del cuerpo de la alerta]
         * @returns void
         */
<span class="fstat-no" title="function not covered" >        function agregarAlerta(tipoMensaje, mensaje) {</span>
<span class="cstat-no" title="statement not covered" >            vm.alerts.push({ type: tipoMensaje, msg: mensaje });</span>
        }
&nbsp;
        /**
         * @author Mauro Xavier Rivera Rasury (mjrr210316)
         * @description Funcion para borrar formulario
         * @returns void
         */
<span class="fstat-no" title="function not covered" >        function borrarFiltros() {</span>
<span class="cstat-no" title="statement not covered" >            vm.alerts = [];</span>
<span class="cstat-no" title="statement not covered" >            vm.guardar = true;</span>
<span class="cstat-no" title="statement not covered" >            vm.desactivarBtnAceptar = true;</span>
<span class="cstat-no" title="statement not covered" >            vm.txtEmail = "";</span>
<span class="cstat-no" title="statement not covered" >            vm.txtClave = "";</span>
        }
    }
}(window.angular));</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Jun 16 2018 00:26:37 GMT+0200 (Hora de verano romance)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
